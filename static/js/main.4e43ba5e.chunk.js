(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{110:function(e,t,n){e.exports={footer:"Footer_footer__3K7hu"}},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){e.exports={avatar:"ProfileInfo_avatar__1-AYj"}},121:function(e,t,n){},122:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(54),c=n.n(a),o=(n(121),n(10)),i=n(9),u=(n(122),n(56)),l=n.n(u),j=n(0);function d(){return Object(j.jsx)("nav",{className:l.a.nav,children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/profile",activeClassName:l.a.active,children:"Profile"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/dialogs",activeClassName:l.a.active,children:"Messages"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/users",children:"Users"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/news",children:"News"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/musics",children:"Musics"})}),Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"/settings",children:"Settings"})})]})})}var b=n(110),f=n.n(b);function p(){return Object(j.jsx)("footer",{className:f.a.footer,children:"Footer"})}var h=n(23),g=n(24),O=n(27),m=n(26),x=n(11),v=n(111),P=n.n(v).a.create({withCredentials:!0,headers:{"API-kEY":"fe88c94b-7e3d-4776-912d-349e13ec1b3a"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return P.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},w=function(e){return P.post("follow/".concat(e))},y=function(e){return P.delete("follow/".concat(e))},S=function(e){return P.get("profile/".concat(e))},C=function(e){return P.get("profile/status/".concat(e))},N=function(e){return P.put("profile/status",{status:e})},U=function(){return P.get("auth/me")},F=n(21),I=n(4),k="FOLLOW",A="UNFOLLOW",E="SET_USERS",T="SET_CURRENT_PAGE",M="SET_TOTAL_USERS_COUNT",L="TOGGLE_IS_FETCHING",D="TOGGLE_IS_FOLLOWING_PROGRESS",G={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingProgress:[]},R=function(e){return{type:E,users:e}},H=function(e){return{type:M,totalUsersCount:e}},z=function(e){return{type:L,isFetching:e}},V=function(e,t){return{type:D,followingProgress:e,userId:t}},W=n.p+"static/media/loader.6bbff2a4.svg",B=function(){return Object(j.jsx)("img",{alt:"#",src:W})},J=n(57),K=n.n(J),q=n.p+"static/media/user.5a5558e5.jpg",Y=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],s=1;s<=t;s++)n.push(s);return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:n.map((function(t){return Object(j.jsx)("span",{onClick:function(){return e.sentCurrentPageHandler(t)},className:e.currentPage===t?K.a.selectedPage:"",children:t})}))}),e.users.map((function(t){return Object(j.jsxs)("div",{className:K.a.users,children:[Object(j.jsx)("div",{className:K.a.user_img,children:Object(j.jsx)(o.b,{to:"/profile/"+t.id,children:Object(j.jsx)("img",{src:null!=t.photos.small?t.photos.small:q,alt:"#"})})}),Object(j.jsxs)("div",{className:"user_contant",children:[Object(j.jsx)("div",{className:"name",children:t.name}),t.followed?Object(j.jsx)("button",{disabled:e.followingProgress.some((function(e){return e==t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(j.jsx)("button",{disabled:e.followingProgress.some((function(e){return e==t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})]})]})}))]})},Q=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).sentCurrentPageHandler=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0),_(t,e.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items)}))},e}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(j.jsxs)(j.Fragment,{children:[this.props.isFetching?Object(j.jsx)(B,{}):null,Object(j.jsx)(Y,{users:this.props.users,pageSize:this.props.pageSize,totalUsersCount:this.props.totalUsersCount,currentPage:this.props.currentPage,follow:this.props.follow,unfollow:this.props.unfollow,sentCurrentPageHandler:this.sentCurrentPageHandler,toggleIsFollowingProgress:this.props.toggleIsFollowingProgress,followingProgress:this.props.followingProgress})]})}}]),n}(r.a.Component),X=Object(x.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingProgress:e.usersPage.followingProgress}}),{follow:function(e){return function(t){t(V(!0,e)),w(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:k,userId:e}}(e)),t(V(!1,e))}))}},unfollow:function(e){return function(t){t(V(!0,e)),y(e).then((function(n){0===n.data.resultCode&&t(function(e){return{type:A,userId:e}}(e)),t(V(!1,e))}))}},setUsers:R,setCurrentPage:function(e){return{type:T,currentPage:e}},setTotalUsersCount:H,toggleIsFetching:z,toggleIsFollowingProgress:V,getUsers:function(e,t){return function(n){n(z(!0)),_(e,t).then((function(e){n(z(!1)),n(R(e.items)),n(H(e.totalCount))}))}}})(Q),Z=n(77),$=n.n(Z);function ee(e){return Object(j.jsx)("header",{className:$.a.header,children:Object(j.jsx)("div",{className:$.a.login,children:e.isAuth?Object(j.jsx)(o.b,{to:"/login",children:e.login}):Object(j.jsx)(o.b,{to:"/login",children:"Login"})})})}var te,ne="SET_USER_DATA",se={id:null,email:"",login:"",isAuth:!1},re=function(e){return{type:ne,data:e}},ae=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"componentDidMount",value:function(){this.props.getAuthUserDate()}},{key:"render",value:function(){return Object(j.jsx)(ee,Object(I.a)({},this.props))}}]),n}(r.a.Component),ce=Object(x.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{setUserData:re,getAuthUserDate:function(){return function(e){U().then((function(t){0===t.data.resultCode&&e(re(t.data.data))}))}}})(ae),oe=n(248),ie=n(247),ue=n(42),le=n(43),je=n.n(le),de=["meta","input","type"],be=["meta","input","type"],fe=function(e){var t=e.meta,n=e.input,s=e.type,r=(Object(ue.a)(e,de),t.error&&t.touched);return Object(j.jsxs)("div",{className:je.a.formControl+" "+(r?je.a.error:""),children:[Object(j.jsx)("textarea",Object(I.a)(Object(I.a)({},n),{},{type:s})),r&&Object(j.jsx)("div",{children:Object(j.jsx)("span",{children:t.error})})]})},pe=function(e){var t=e.meta,n=e.input,s=e.type,r=(Object(ue.a)(e,be),t.error&&t.touched);return Object(j.jsxs)("div",{className:je.a.formControl+" "+(r?je.a.error:""),children:[Object(j.jsx)("input",Object(I.a)(Object(I.a)({},n),{},{type:s})),r&&Object(j.jsx)("div",{children:Object(j.jsx)("span",{children:t.error})})]})},he=function(e){if(!e)return"Field is required!"},ge=(te=30,function(e){if(e.length>te)return"Max length is ".concat(te," symbols!")});function Oe(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Login"}),Object(j.jsx)(me,{onSubmit:function(e){}})]})}var me=Object(ie.a)({form:"login"})((function(e){return Object(j.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(j.jsx)("div",{children:Object(j.jsx)(oe.a,{type:"text",name:"login",placeholder:"Login",component:pe,validate:[he]})}),Object(j.jsx)("div",{children:Object(j.jsx)(oe.a,{type:"text",name:"password",placeholder:"Password",component:pe,validate:[he]})}),Object(j.jsxs)("div",{children:[Object(j.jsx)(oe.a,{type:"checkbox",name:"rememberMe",component:pe})," remember me"]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:"Login"})})]})})),xe=n(249),ve="ADD_POST",Pe="SET_USER_PROFILE",_e="GET_STATUS",we={posts:[{id:Object(xe.a)(),post:"Hi, how are yoy?"},{id:Object(xe.a)(),post:"Whre are you?"},{id:Object(xe.a)(),post:"I am fine hbh"}],newPostText:"",profile:null,status:""};var ye=function(e){return{type:Pe,profile:e}},Se=function(e){return{type:_e,status:e}},Ce=n(113),Ne=n.n(Ce),Ue=n(114),Fe=n.n(Ue);function Ie(e){return Object(j.jsx)("div",{className:Fe.a.item,children:e.post},e.id)}function ke(e){return Object(j.jsxs)("div",{children:["my posts",Object(j.jsx)("div",{children:Object(j.jsx)(Ae,{onSubmit:function(t){e.addPost(t.postText)}})}),Object(j.jsx)("div",{className:Ne.a.posts,children:e.profilePage.posts.map((function(e){return Object(j.jsx)(Ie,Object(I.a)({},e))}))})]})}var Ae=Object(ie.a)({form:"ProfileAddPostForm"})((function(e){return Object(j.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(j.jsx)(oe.a,{component:fe,name:"postText",type:"text",validate:[he,ge]}),Object(j.jsx)("button",{children:"Add post"})]})})),Ee=n(115),Te=n.n(Ee),Me=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(h.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(t){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.changeStatus=function(t){var n=t.currentTarget.value;e.setState({status:n})},e}return Object(g.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return Object(j.jsx)("div",{children:this.state.editMode?Object(j.jsx)("div",{children:Object(j.jsx)("input",{onChange:this.changeStatus,autoFocus:!0,onBlur:this.deactivateEditMode,value:this.state.status,type:"text"})}):Object(j.jsx)("div",{children:Object(j.jsxs)("span",{onDoubleClick:this.activateEditMode,children:[this.props.status||"---"," "]})})})}}]),n}(r.a.Component),Le=function(e){return e.profile?Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:Te.a.avatar,children:[Object(j.jsx)("img",{alt:"#",src:e.profile.photos.small}),Object(j.jsx)(Me,{status:e.status,updateStatus:e.updateStatus})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:e.profile.fullName}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{children:["Profile in VK:",Object(j.jsx)("a",{href:"#",children:e.profile.contacts.vk})]}),Object(j.jsxs)("div",{children:["Profile in facebook: ",Object(j.jsx)("a",{href:e.profile.contacts.facebook,target:"_blank",rel:"noreferrer",children:e.profile.contacts.facebook})]}),Object(j.jsxs)("div",{children:["Profile in instagram: ",Object(j.jsx)("a",{href:e.profile.contacts.instagram,target:"_blank",rel:"noreferrer",children:e.profile.contacts.instagram})]}),Object(j.jsxs)("div",{children:["Profile in github:",Object(j.jsxs)("a",{href:e.profile.contacts.github,target:"_blank",rel:"noreferrer",children:[" ",e.profile.contacts.github," "]})]}),Object(j.jsxs)("div",{children:["Profile in twitter:",Object(j.jsxs)("a",{href:e.profile.contacts.twitter,target:"_blank",rel:"noreferrer",children:[" ",e.profile.contacts.twitter]})]})]}),Object(j.jsx)("hr",{})]}):Object(j.jsx)(B,{})};function De(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(Le,{profile:e.profilePage.profile,status:e.profilePage.status,updateStatus:e.updateStatus}),Object(j.jsx)(ke,{addPost:e.addPost,profilePage:e.profilePage})]})}var Ge=["isAuth"];function Re(e){return Object(x.b)((function(e){return{isAuth:e.auth.isAuth}}),null)((function(t){var n=t.isAuth,s=Object(ue.a)(t,Ge);return n?Object(j.jsx)(e,Object(I.a)({},s)):Object(j.jsx)(i.a,{to:"/login"})}))}var He=n(8),ze=function(e){Object(O.a)(n,e);var t=Object(m.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="1143"),this.props.getProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(j.jsx)(De,Object(I.a)({},this.props))}}]),n}(r.a.Component),Ve=Object(He.d)(Object(x.b)((function(e){return{profilePage:e.profilePage,status:e.profilePage.status}}),{addPost:function(e){return{type:ve,post:e}},getStatus:function(e){return function(t){C(e).then((function(e){t(Se(e.data))}))}},updateStatus:function(e){return function(t){N(e).then((function(n){0===n.data.resultCode&&t(Se(e))}))}},setUserProfile:ye,getProfile:function(e){return function(t){S(e).then((function(e){t(ye(e.data))}))}}}),i.f,Re)(ze),We=n(29),Be=n.n(We);function Je(e){return Object(j.jsx)("div",{className:Be.a.dialog,children:Object(j.jsx)(o.b,{to:"/dialogs/"+e.id,children:e.name})})}function Ke(e){return Object(j.jsx)("div",{className:Be.a.message,children:e.message})}var qe="ADD_MESSAGE",Ye={dialogs:[{name:"Vovs",id:1},{name:"Petr",id:2},{name:"Sasha",id:3},{name:"Dimich",id:4}],messages:[{message:"Hi, how are yoy?"},{message:"Whre are you?"},{message:"I am fine"}]},Qe=Object(ie.a)({form:"dialog-add-message-form"})((function(e){return Object(j.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(j.jsx)("div",{children:Object(j.jsx)(oe.a,{component:fe,name:"NewMessageBody",validate:[he,ge]})}),Object(j.jsx)("button",{children:"Add message"})]})}));var Xe=Object(He.d)(Object(x.b)((function(e){return{dialogsPage:e.dialogsPage}}),{addMessage:function(e){return{type:qe,message:e}}}),Re)((function(e){var t=e.dialogsPage.dialogs.map((function(e){return Object(j.jsx)(Je,{name:e.name,id:e.id})})),n=e.dialogsPage.messages.map((function(e){return Object(j.jsx)(Ke,{message:e.message})}));return Object(j.jsxs)("div",{className:Be.a.dialogs,children:[Object(j.jsx)("div",{className:Be.a.dialogs_items,children:t}),Object(j.jsx)("div",{className:Be.a.messages,children:n}),Object(j.jsx)(Qe,{onSubmit:function(t){e.addMessage(t.NewMessageBody)}})]})}));var Ze=function(e){return Object(j.jsx)(o.a,{children:Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)(ce,{}),Object(j.jsx)(d,{}),Object(j.jsxs)("div",{className:"app-wrapper-content",children:[Object(j.jsx)(i.b,{path:"/profile/:userId?",render:function(){return Object(j.jsx)(Ve,{})}}),Object(j.jsx)(i.b,{exact:!0,path:"/dialogs",render:function(){return Object(j.jsx)(Xe,{})}}),Object(j.jsx)(i.b,{exact:!0,path:"/users",render:function(){return Object(j.jsx)(X,{})}}),Object(j.jsx)(i.b,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(Oe,{})}})]}),Object(j.jsx)(p,{})]})})},$e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,251)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),r(e),a(e),c(e)}))},et=n(116),tt=n(250),nt=Object(He.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(I.a)(Object(I.a)({},e),{},{posts:[].concat(Object(F.a)(e.posts),[{id:Object(xe.a)(),post:t.post}])});case Pe:return Object(I.a)(Object(I.a)({},e),{},{profile:t.profile});case _e:return Object(I.a)(Object(I.a)({},e),{},{status:t.status});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;return t.type===qe?Object(I.a)(Object(I.a)({},e),{},{messages:[].concat(Object(F.a)(e.messages),[{message:t.message}])}):e},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(I.a)(Object(I.a)({},e),{},{users:Object(F.a)(e.users.map((function(e){return e.id===t.userId?Object(I.a)(Object(I.a)({},e),{},{followed:!0}):e})))});case A:return Object(I.a)(Object(I.a)({},e),{},{users:Object(F.a)(e.users.map((function(e){return e.id===t.userId?Object(I.a)(Object(I.a)({},e),{},{followed:!1}):e})))});case E:return Object(I.a)(Object(I.a)({},e),{},{users:t.users});case T:return Object(I.a)(Object(I.a)({},e),{},{currentPage:t.currentPage});case M:return Object(I.a)(Object(I.a)({},e),{},{totalUsersCount:t.totalUsersCount});case L:return Object(I.a)(Object(I.a)({},e),{},{isFetching:t.isFetching});case D:return Object(I.a)(Object(I.a)({},e),{},{followingProgress:t.followingProgress?[].concat(Object(F.a)(e.followingProgress),[t.userId]):Object(F.a)(e.followingProgress.filter((function(e){return e!=t.userId})))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;return t.type===ne?Object(I.a)(Object(I.a)(Object(I.a)({},e),t.data),{},{isAuth:!0}):e},form:tt.a}),st=Object(He.e)(nt,Object(He.a)(et.a));window.store=st;var rt=function(){c.a.render(Object(j.jsx)(x.a,{store:st,children:Object(j.jsx)(Ze,{})}),document.getElementById("root"))};rt(),st.subscribe(rt),$e()},29:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__3V6_V",dialog:"Dialogs_dialog__3d9mu"}},43:function(e,t,n){e.exports={error:"FormControls_error__36qs1",formControl:"FormControls_formControl__3OfRf"}},56:function(e,t,n){e.exports={nav:"Navbar_nav__bgasC",active:"Navbar_active__rnkVo"}},57:function(e,t,n){e.exports={users:"Users_users__MVuEk",user_img:"Users_user_img__1mIWN",selectedPage:"Users_selectedPage__aVJHv"}},77:function(e,t,n){e.exports={header:"Header_header__LoKIb",login:"Header_login__1GcnA"}}},[[245,1,2]]]);
//# sourceMappingURL=main.4e43ba5e.chunk.js.map